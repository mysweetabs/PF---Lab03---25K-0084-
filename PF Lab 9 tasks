Question 1:

#include <stdio.h>

int mysteryAccess(int *ptr, int rows, int cols, int i, int j)
{
    return *(ptr + i * cols + j);
}

int main()
{
    int matrix[3][3] = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};

    printf("Testing 3x3 matrix:\n");
    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 3; j++)
        {
            printf("%d ", matrix[i][j]);
        }
        printf("\n");
    }

    printf("\nAccessing element at [1][2] using pointer arithmetic: %d\n",
           mysteryAccess(&matrix[0][0], 3, 3, 1, 2));

    return 0;
}



Question 2:

#include <stdio.h>
#include <stdlib.h>

int add(int a, int b) { return a + b; }
int subtract(int a, int b) { return a - b; }
int multiply(int a, int b) { return a * b; }
int divide(int a, int b) { return b != 0 ? a / b : 0; }

int chainCalculator(int start, int *values, int n, int (**ops)(int, int))
{
    int result = start;
    for (int i = 0; i < n; i++)
    {
        result = ops[i](result, values[i]);
    }
    return result;
}

int main()
{
    int values[] = {5, 3, 2};
    int (**operations)(int, int) = malloc(3 * sizeof(int (*)(int, int)));

    operations[0] = add;
    operations[1] = multiply;
    operations[2] = subtract;

    int result = chainCalculator(10, values, 3, operations);
    printf("Start: 10\n");
    printf("OP1: 10 + 5 = 15\n");
    printf("OP2: 15 * 3 = 45\n");
    printf("OP3: 45 - 2 = 43\n");
    printf("Final result: %d\n", result);

    free(operations);
    return 0;
}



Question 3:

#include <stdio.h>

void swapByValue(int a, int b)
{
    int temp = a;
    a = b;
    b = temp;
}

void swapByPointer(int *a, int *b)
{
    int temp = *a;
    *a = *b;
    *b = temp;
}

void swapByReference(int *a, int *b)
{
    int *temp = a;
    a = b;
    b = temp;
}

void swapRows(int *ptr, int cols, int row1, int row2)
{
    for (int j = 0; j < cols; j++)
    {
        int temp = *(ptr + row1 * cols + j);
        *(ptr + row1 * cols + j) = *(ptr + row2 * cols + j);
        *(ptr + row2 * cols + j) = temp;
    }
}

int main()
{
    int a = 5, b = 10;

    printf("Original values: a=%d, b=%d\n\n", a, b);

    printf("Testing swapByValue:\n");
    swapByValue(a, b);
    printf("After swapByValue: a=%d, b=%d\n", a, b);
    printf("Explanation: Values are copied, changes don't affect originals\n\n");

    printf("Testing swapByPointer:\n");
    swapByPointer(&a, &b);
    printf("After swapByPointer: a=%d, b=%d\n", a, b);
    printf("Explanation: Pointer dereferences allow actual swap in memory\n\n");

    int x = 15, y = 20;
    printf("Testing swapByReference: x=%d, y=%d\n", x, y);
    swapByReference(&x, &y);
    printf("After swapByReference: x=%d, y=%d\n", x, y);
    printf("Explanation: Only pointer variables swap, not actual values\n\n");

    printf("Testing row swap in 2D array:\n");
    int arr[2][3] = {{1, 2, 3}, {4, 5, 6}};

    printf("Before:\n");
    for (int i = 0; i < 2; i++)
    {
        for (int j = 0; j < 3; j++)
        {
            printf("%d ", arr[i][j]);
        }
        printf("\n");
    }

    swapRows(&arr[0][0], 3, 0, 1);

    printf("After swapping rows 0 and 1:\n");
    for (int i = 0; i < 2; i++)
    {
        for (int j = 0; j < 3; j++)
        {
            printf("%d ", arr[i][j]);
        }
        printf("\n");
    }

    return 0;
}



Question 4:

#include <stdio.h>

void *findMax(void *arr, int size, int elementSize, int (*compare)(void *, void *))
{
    void *max = arr;
    for (int i = 1; i < size; i++)
    {
        void *current = (char *)arr + i * elementSize;
        if (compare(current, max) > 0)
        {
            max = current;
        }
    }
    return max;
}

int compareInt(void *a, void *b)
{
    return (*(int *)a - *(int *)b);
}

int compareFloat(void *a, void *b)
{
    float diff = *(float *)a - *(float *)b;
    if (diff > 0)
        return 1;
    if (diff < 0)
        return -1;
    return 0;
}

int compareChar(void *a, void *b)
{
    return (*(char *)a - *(char *)b);
}

int main()
{
    printf("Testing with int array:\n");
    int intArr[] = {3, 7, 2, 9, 1};
    int *maxInt = (int *)findMax(intArr, 5, sizeof(int), compareInt);
    printf("Array: 3, 7, 2, 9, 1\n");
    printf("Max int: %d\n\n", *maxInt);

    printf("Testing with float array:\n");
    float floatArr[] = {3.5, 7.2, 2.1, 9.8, 1.3};
    float *maxFloat = (float *)findMax(floatArr, 5, sizeof(float), compareFloat);
    printf("Array: 3.5, 7.2, 2.1, 9.8, 1.3\n");
    printf("Max float: %.1f\n\n", *maxFloat);

    printf("Testing with char array:\n");
    char charArr[] = {'d', 'a', 'z', 'b', 'k'};
    char *maxChar = (char *)findMax(charArr, 5, sizeof(char), compareChar);
    printf("Array: d, a, z, b, k\n");
    printf("Max char: %c\n", *maxChar);

    return 0;
}



Question 5:

#include <stdio.h>

void testArr3(int arr3[3][4])
{
    printf("arr3[3][4] - Array of 3 arrays of 4 ints\n");
    printf("Access arr3[1][2]: %d\n", arr3[1][2]);
    printf("Size: %lu bytes\n\n", sizeof(int) * 3 * 4);
}

void testArr2(int *arr2[3])
{
    printf("arr2[3] - Array of 3 pointers to int\n");
    printf("Access arr2[1][2]: %d\n", arr2[1][2]);
    printf("Each pointer can point to different sized arrays\n\n");
}

void testArr1(int (*arr1)[4])
{
    printf("arr1[4] - Pointer to array of 4 ints\n");
    printf("Access arr1[1][2]: %d\n", arr1[1][2]);
    printf("Points to entire row at once\n\n");
}

int main()
{
    printf("=== Explanation ===\n\n");

    printf("int arr3[3][4]:\n");
    printf("- Contiguous 2D array in memory\n");
    printf("- All elements stored sequentially\n");
    printf("- Cannot reassign rows\n\n");

    int arr3[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}};
    testArr3(arr3);

    printf("int *arr2[3]:\n");
    printf("- Array of pointers\n");
    printf("- Each pointer can point to different locations\n");
    printf("- Rows can be reassigned\n\n");

    int row0[] = {1, 2, 3, 4};
    int row1[] = {5, 6, 7, 8};
    int row2[] = {9, 10, 11, 12};
    int *arr2[3] = {row0, row1, row2};
    testArr2(arr2);

    printf("int (*arr1)[4]:\n");
    printf("- Pointer to an array of 4 ints\n");
    printf("- Can point to different arrays\n");
    printf("- Treats each row as a unit\n\n");

    int (*arr1)[4] = arr3;
    testArr1(arr1);

    printf("=== Type Compatibility ===\n");
    printf("Passing wrong type causes:\n");
    printf("- Compiler warnings or errors\n");
    printf("- Incorrect memory access\n");
    printf("- Undefined behavior\n");

    return 0;
}



Question 6:

#include <stdio.h>
#include <string.h>

int add(int a, int b)
{
    return a + b;
}

int sub(int a, int b)
{
    return a - b;
}

int mul(int a, int b)
{
    return a * b;
}

int divi(int a, int b)
{
    return b != 0 ? a / b : 0;
}

int (*processCommand(char *cmd))(int, int)
{
    if (cmd == NULL)
        return NULL;

    if (strcmp(cmd, "add") == 0)
        return add;
    if (strcmp(cmd, "sub") == 0)
        return sub;
    if (strcmp(cmd, "mul") == 0)
        return mul;
    if (strcmp(cmd, "div") == 0)
        return divi;

    return NULL;
}

int main()
{
    char command[10];
    int a, b;

    printf("Command processor\n");
    printf("Available commands: add, sub, mul, div\n\n");

    printf("Enter command: ");
    scanf("%s", command);

    int (*operation)(int, int) = processCommand(command);

    if (operation == NULL)
    {
        printf("Invalid command\n");
        return 1;
    }

    printf("Enter two numbers: ");
    scanf("%d %d", &a, &b);

    int result = operation(a, b);
    printf("Result: %d\n", result);

    printf("\nTesting all operations:\n");
    printf("10 + 5 = %d\n", processCommand("add")(10, 5));
    printf("10 - 5 = %d\n", processCommand("sub")(10, 5));
    printf("10 * 5 = %d\n", processCommand("mul")(10, 5));
    printf("10 / 5 = %d\n", processCommand("div")(10, 5));

    return 0;
}



Question 7:

#include <stdio.h>
#include <stdlib.h>

void rotateMatrix90(int **matrix, int n)
{
    int **temp = (int **)malloc(n * sizeof(int *));
    for (int i = 0; i < n; i++)
    {
        temp[i] = (int *)malloc(n * sizeof(int));
    }

    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < n; j++)
        {
            temp[j][n - 1 - i] = matrix[i][j];
        }
    }

    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < n; j++)
        {
            matrix[i][j] = temp[i][j];
        }
    }

    for (int i = 0; i < n; i++)
    {
        free(temp[i]);
    }
    free(temp);
}

void printMatrix(int **matrix, int n)
{
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < n; j++)
        {
            printf("%d ", matrix[i][j]);
        }
        printf("\n");
    }
}

int main()
{
    int n = 3;

    int **matrix = (int **)malloc(n * sizeof(int *));
    for (int i = 0; i < n; i++)
    {
        matrix[i] = (int *)malloc(n * sizeof(int));
    }

    matrix[0][0] = 1;
    matrix[0][1] = 2;
    matrix[0][2] = 3;
    matrix[1][0] = 4;
    matrix[1][1] = 5;
    matrix[1][2] = 6;
    matrix[2][0] = 7;
    matrix[2][1] = 8;
    matrix[2][2] = 9;

    printf("Original 3x3 matrix:\n");
    printMatrix(matrix, n);

    rotateMatrix90(matrix, n);

    printf("\nAfter 90-degree clockwise rotation:\n");
    printMatrix(matrix, n);

    for (int i = 0; i < n; i++)
    {
        free(matrix[i]);
    }
    free(matrix);

    return 0;
}



Question 8:

#include <stdio.h>

int ascending(int a, int b)
{
    return a - b;
}

int descending(int a, int b)
{
    return b - a;
}

int absoluteCompare(int a, int b)
{
    int absA = a < 0 ? -a : a;
    int absB = b < 0 ? -b : b;
    return absA - absB;
}

void customSort(int *arr, int size, int (*condition)(int, int))
{
    for (int i = 0; i < size - 1; i++)
    {
        for (int j = 0; j < size - i - 1; j++)
        {
            if (condition(arr[j], arr[j + 1]) > 0)
            {
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

void printArray(int *arr, int size)
{
    for (int i = 0; i < size; i++)
    {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

int main()
{
    int arr1[] = {-5, 3, -8, 1, 9, -2};
    int arr2[] = {-5, 3, -8, 1, 9, -2};
    int arr3[] = {-5, 3, -8, 1, 9, -2};
    int size = 6;

    printf("Original array: ");
    printArray(arr1, size);
    printf("\n");

    customSort(arr1, size, ascending);
    printf("Ascending sort: ");
    printArray(arr1, size);

    customSort(arr2, size, descending);
    printf("Descending sort: ");
    printArray(arr2, size);

    customSort(arr3, size, absoluteCompare);
    printf("Absolute value sort: ");
    printArray(arr3, size);

    return 0;
}



Question 9:

#include <stdio.h>

int *(*stateA(int *num))(int *);
int *(*stateB(int *num))(int *);
int *(*stateC(int *num))(int *);
int *(*stateD(int *num))(int *);

int *(*stateA(int *num))(int *)
{
    printf("State A: Enter number: ");
    scanf("%d", num);
    if (*num > 5)
    {
        printf("Number > 5, going to State B\n");
        return stateB;
    }
    else
    {
        printf("Number <= 5, going to State C\n");
        return stateC;
    }
}

int *(*stateB(int *num))(int *)
{
    printf("State B: Multiplying by 2\n");
    *num *= 2;
    printf("Result: %d, going to State D\n", *num);
    return stateD;
}

int *(*stateC(int *num))(int *)
{
    printf("State C: Adding 10\n");
    *num += 10;
    printf("Result: %d, going to State D\n", *num);
    return stateD;
}

int *(*stateD(int *num))(int *)
{
    printf("State D: Final result = %d\n", *num);
    printf("Game over\n");
    return NULL;
}

int main()
{
    int num;
    int *(*currentState)(int *) = stateA;

    printf("=== Pointer State Machine ===\n\n");

    while (currentState != NULL)
    {
        currentState = currentState(&num);
        printf("\n");
    }

    return 0;
}



Question 10:

#include <stdio.h>

int add(int a, int b)
{
    return a + b;
}

void printMemory(void *ptr, int size)
{
    unsigned char *bytes = (unsigned char *)ptr;
    printf("Memory content: ");
    for (int i = 0; i < size; i++)
    {
        printf("%02x ", bytes[i]);
    }
    printf("\n");
}

int main()
{
    int x = 42;
    int *px = &x;
    int arr[3] = {1, 2, 3};
    int *parr = arr;
    int (*fp)(int, int) = add;

    printf("=== Memory Layout Detective ===\n\n");

    printf("1. int x = 42:\n");
    printf("   Address: %p\n", (void *)&x);
    printf("   Size: %lu bytes\n", sizeof(x));
    printMemory(&x, sizeof(x));
    printf("\n");

    printf("2. int *px (pointer to int):\n");
    printf("   Pointer address: %p\n", (void *)&px);
    printf("   Points to: %p\n", (void *)px);
    printf("   Size: %lu bytes\n", sizeof(px));
    printMemory(&px, sizeof(px));
    printf("\n");

    printf("3. int arr[3] = {1, 2, 3}:\n");
    printf("   Array address: %p\n", (void *)arr);
    printf("   Size: %lu bytes\n", sizeof(arr));
    for (int i = 0; i < 3; i++)
    {
        printf("   arr[%d] at %p: ", i, (void *)&arr[i]);
        printMemory(&arr[i], sizeof(int));
    }
    printf("\n");

    printf("4. int *parr (pointer to array):\n");
    printf("   Pointer address: %p\n", (void *)&parr);
    printf("   Points to: %p\n", (void *)parr);
    printf("   Size: %lu bytes\n", sizeof(parr));
    printMemory(&parr, sizeof(parr));
    printf("\n");

    printf("5. Function pointer:\n");
    printf("   Pointer address: %p\n", (void *)&fp);
    printf("   Points to function at: %p\n", (void *)fp);
    printf("   Size: %lu bytes\n", sizeof(fp));
    printMemory(&fp, sizeof(fp));
    printf("\n");

    printf("=== Observations ===\n");
    printf("1. Memory alignment: addresses are typically aligned\n");
    printf("2. Pointer sizes: all pointers are %lu bytes (platform dependent)\n", sizeof(void *));
    printf("3. int size: %lu bytes\n", sizeof(int));
    printf("4. Arrays stored contiguously in memory\n");
    printf("5. Little-endian byte order (least significant byte first)\n");

    return 0;
}
